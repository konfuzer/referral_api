# Реферальная система

## Описание проекта

Данный проект реализует простую реферальную систему с возможностью авторизации пользователей по номеру телефона, генерацией инвайт-кодов и возможностью активации инвайт-кодов. Проект включает в себя API для взаимодействия с клиентом и интерфейс на Django Templates.

## Функционал

1. **Авторизация по номеру телефона**:
   - Пользователь вводит номер телефона и получает 4-значный код авторизации.
   - Код отправляется с задержкой 1-2 секунды для имитации реальной отправки.

2. **Регистрация пользователей**:
   - Если пользователь не зарегистрирован, он автоматически добавляется в базу данных.

3. **Инвайт-коды**:
   - При первой авторизации пользователю присваивается уникальный 6-значный инвайт-код.
   - Пользователь может активировать чужой инвайт-код, но только один раз.

4. **Профиль пользователя**:
   - В профиле отображается информация о пользователе и список пользователей, которые использовали инвайт-код текущего пользователя.

5. **Документация API**:
   - Документирование API с использованием ReDoc.

## Установка

### Предварительные требования

- Python 3.x
- Django
- Django REST Framework
- SQLite (или другая СУБД по вашему выбору)

### Шаги установки

1. Клонируйте репозиторий:
   ```bash
   git clone <URL_вашего_репозитория>
   cd <имя_папки_репозитория>

2. Создайте и активируйте виртуальное окружение:

python -m venv venv
source venv/bin/activate  # Для Linux/Mac
venv\Scripts\activate  # Для Windows

3. Установите зависимости:

pip install -r requirements.txt

4. Примените миграции:

python manage.py migrate

5. Запустите сервер:

python manage.py runserver
Откройте браузер и перейдите по адресу http://localhost:8000 для доступа к интерфейсу.


## Примеры API-запросов

### 1. Авторизация пользователя по номеру телефона

**Запрос:**

POST /api/login/

*Пример cURL:*

curl -X POST http://localhost:8000/api/login/ \
-H "Content-Type: application/json" \
-d '{"phone_number": "1234567890"}'

# Ответ:

{
    "message": "Код отправлен на телефон."
}

### 2. Проверка кода авторизации

**Запрос:**

POST /api/verify-code/

*Пример cURL:*

curl -X POST http://localhost:8000/api/verify-code/ \
-H "Content-Type: application/json" \
-d '{"code": "1234"}'

# Ответ:

{
    "message": "Вы успешно авторизованы."
}

### 3. Активация инвайт-кода

**Запрос:**

POST /api/activate-invite-code/

*Пример cURL:*

curl -X POST http://localhost:8000/api/activate-invite-code/ \
-H "Content-Type: application/json" \
-H "Authorization: Token ваш_токен_пользователя" \
-d '{"invite_code": "ABC123"}'

# Ответ:

{
    "message": "Инвайт-код активирован."
}

### 4. Получение профиля пользователя

**Запрос:**

GET /api/profile/

*Пример cURL:*

curl -X GET http://localhost:8000/api/profile/ \
-H "Authorization: Token ваш_токен_пользователя"

# Ответ:

{
    "id": 1,
    "phone_number": "1234567890",
    "invite_code": "XYZ789",
    "activated_invite_code": "ABC123"
}


### 5. Страница логина

**Запрос:**

GET /login-page/

*Пример cURL:*

curl -X GET http://localhost:8000/login-page/

# Ответ:

HTML-страница с формой логина.


### 6. Страница профиля

**Запрос:**

GET /profile-page/

*Пример cURL:*

curl -X GET http://localhost:8000/profile-page/

# Ответ:

HTML-страница с информацией о профиле пользователя.



### Объяснение

1. **Авторизация пользователя по номеру телефона**: Этот запрос отправляет номер телефона и ожидает, что на него будет отправлен код для подтверждения.
2. **Проверка кода авторизации**: Этот запрос проверяет код, который пользователь получил на телефон.
3. **Активация инвайт-кода**: Этот запрос активирует инвайт-код для аутентифицированного пользователя.
4. **Получение профиля пользователя**: Этот запрос возвращает информацию о профиле текущего аутентифицированного пользователя.
5. **Страница логина и профиля**: Эти запросы возвращают HTML-страницы для логина и профиля.
